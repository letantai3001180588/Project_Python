{% extends 'base.html' %}
{% load static %}
{% block cart-content %}
<section class="h-100 h-custom" >
  <div class="container py-5 h-100 mt-5">
    <div class="row d-flex justify-content-center align-items-center h-100">
      <div class="col-12">
        <div class="card card-registration card-registration-2" style="border-radius: 15px;overflow:hidden">
          <div class="card-body p-0">
            <div class="row g-0">
              <div class="col-lg-8" style="scrollbar-width: 20px;">
                <div class="p-4">
                  <div class="d-flex justify-content-between align-items-center mb-5">
                    <h1 class="fw-bold mb-0 text-black">Giỏ hàng</h1>
                    <h6 class="mb-0 text-muted">{{order.get_cart_items}} sản phẩm</h6>
                  </div>
                  <div class="px-3 item" style="max-height:450px;overflow-y:scroll;overflow-x:hidden">
                    {% if  items %}
                      {% for item in items %}
                        <hr class="my-4">
                        <div class="row mb-4 d-flex justify-content-between align-items-center">
                    <div class="col-md-2 col-lg-2 col-xl-2">
                      <img
                        src="{{item.product.image.url}}"
                        class="img-fluid rounded-3" alt="Laptop">
                    </div>
                    <div class="col-md-3 col-lg-3 col-xl-3">
                      <h6 class="text-muted">Laptop</h6>
                      <h6 class="text-black mb-0">{{item.product.name}}</h6>
                    </div>
                    <div class="col-md-3 col-lg-3 col-xl-2 d-flex">
                      <button class="btn btn-link px-2 update-cart" onclick="handleBuy({{item.product.id}},'remove')">
                        <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512">
                            <path d="M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z"/>
                        </svg>
                      </button>

                      <input id="form1" min="1" name="quantity" value="{{item.quantity}}" type="number"
                        class="form-control form-control-sm" />

                      <button class="btn btn-link px-2 update-cart" onclick="handleBuy({{item.product.id}},'add')">
                        <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512">
                            <path d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"/>
                        </svg>
                      </button>
                    </div>
                    <div class="col-md-3 col-lg-2 col-xl-2 offset-lg-1">
                      <h6 class="mb-0">{{item.product.price|floatformat:0}} đ</h6>
                    </div>
                    <div class="col-md-1 col-lg-1 col-xl-1 text-end delete-cart">
                      <a href="{% url 'delete_item/' item.id %}">
                        <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512">
                            <path d="M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"/>
                        </svg>
                      </a>
                    </div>
                  </div>
                      {% endfor %}
                    {% else %}
                      <div class="d-flex justify-content-center">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120" width="150px" height="150px" preserveAspectRatio="xMidYMid slice" stroke-width="[object Object]" style="width: 300px; height: 300px;"><defs><clipPath id="__lottie_element_2"><rect width="120" height="120" x="0" y="0"></rect></clipPath></defs><g clip-path="url(#__lottie_element_2)"><g transform="matrix(1,0,0,1,0,0)" opacity="1" stroke-width="[object Object]"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><g opacity="1" transform="matrix(1,0,0,1,60,83.33000183105469)"><path fill="rgb(204,209,217)" fill-opacity="1" d=" M-32.143001556396484,-24.17099952697754 C-32.143001556396484,-24.17099952697754 -32.143001556396484,11.310999870300293 -32.143001556396484,11.310999870300293 C-32.143001556396484,11.310999870300293 -0.0010000000474974513,24.17099952697754 -0.0010000000474974513,24.17099952697754 C-0.0010000000474974513,24.17099952697754 32.14400100708008,11.310999870300293 32.14400100708008,11.310999870300293 C32.14400100708008,11.310999870300293 32.14400100708008,-24.17099952697754 32.14400100708008,-24.17099952697754 C32.14400100708008,-24.17099952697754 -32.143001556396484,-24.17099952697754 -32.143001556396484,-24.17099952697754z"></path></g><g opacity="1" transform="matrix(1,0,0,1,76.0719985961914,83.33000183105469)"><path fill="rgb(230,233,236)" fill-opacity="1" d=" M-16.07200050354004,24.17099952697754 C-16.07200050354004,24.17099952697754 16.07200050354004,11.312000274658203 16.07200050354004,11.312000274658203 C16.07200050354004,11.312000274658203 16.07200050354004,-24.17099952697754 16.07200050354004,-24.17099952697754 C16.07200050354004,-24.17099952697754 -16.07200050354004,-24.17099952697754 -16.07200050354004,-24.17099952697754 C-16.07200050354004,-24.17099952697754 -16.07200050354004,24.17099952697754 -16.07200050354004,24.17099952697754z"></path></g><g opacity="1" transform="matrix(1,0,0,1,60,55.74800109863281)"><path fill="rgb(244,244,244)" fill-opacity="1" d=" M12.855999946594238,-23.249000549316406 C12.855999946594238,-23.249000549316406 0,-16.604999542236328 0,-16.604999542236328 C0,-16.604999542236328 -12.857000350952148,-23.249000549316406 -12.857000350952148,-23.249000549316406 C-12.857000350952148,-23.249000549316406 -45,-6.640999794006348 -45,-6.640999794006348 C-45,-6.640999794006348 -32.14400100708008,0.0010000000474974513 -32.14400100708008,0.0010000000474974513 C-32.14400100708008,0.0010000000474974513 -45,6.644999980926514 -45,6.644999980926514 C-45,6.644999980926514 -12.857000350952148,23.249000549316406 -12.857000350952148,23.249000549316406 C-12.857000350952148,23.249000549316406 0,16.608999252319336 0,16.608999252319336 C0,16.608999252319336 12.855999946594238,23.249000549316406 12.855999946594238,23.249000549316406 C12.855999946594238,23.249000549316406 45,6.644999980926514 45,6.644999980926514 C45,6.644999980926514 32.143001556396484,0.0010000000474974513 32.143001556396484,0.0010000000474974513 C32.143001556396484,0.0010000000474974513 45,-6.640999794006348 45,-6.640999794006348 C45,-6.640999794006348 12.855999946594238,-23.249000549316406 12.855999946594238,-23.249000549316406z"></path></g><g opacity="1" transform="matrix(1,0,0,1,60,55.75)"><path fill="rgb(204,209,217)" fill-opacity="1" d=" M-0.0010000000474974513,-16.60700035095215 C-0.0010000000474974513,-16.60700035095215 -32.143001556396484,-0.0020000000949949026 -32.143001556396484,-0.0020000000949949026 C-32.143001556396484,-0.0020000000949949026 -0.0010000000474974513,16.60700035095215 -0.0010000000474974513,16.60700035095215 C-0.0010000000474974513,16.60700035095215 32.14400100708008,-0.0020000000949949026 32.14400100708008,-0.0020000000949949026 C32.14400100708008,-0.0020000000949949026 -0.0010000000474974513,-16.60700035095215 -0.0010000000474974513,-16.60700035095215z"></path></g></g></g><g transform="matrix(1,0,0,1,-0.75,-0.75)" opacity="1" stroke-width="display: block;"><g opacity="1" transform="matrix(1,0,0,1,67.87000274658203,37.63100051879883)"><path stroke-linecap="round" stroke-linejoin="round" fill-opacity="0" stroke-dasharray=" 2.028 2.028" stroke-dashoffset="0" stroke="rgb(159,159,159)" stroke-opacity="1" stroke-width="1" d=" M-7.382999897003174,24.760000228881836 C-12.057999610900879,20.631999969482422 -20.95599937438965,10.812999725341797 -7.046000003814697,5.539999961853027 C5.769999980926514,0.6819999814033508 9.795000076293945,1.4609999656677246 14.34000015258789,-2.2730000019073486 C17.514999389648438,-4.882999897003174 18.22100067138672,-9.887999534606934 15.883000373840332,-14.522000312805176"></path></g></g><g transform="matrix(1,0,0,1,19.775558471679688,10.814558029174805)" opacity="1" stroke-width="[object Object]"><g opacity="1" transform="matrix(1,0,0,1,0,0)"><g opacity="1" transform="matrix(1,0,0,1,57.957000732421875,10.552000045776367)"><path fill="rgb(255,255,255)" fill-opacity="1" d=" M0,-3.614000082015991 C1.996000051498413,-3.614000082015991 3.614000082015991,-1.996000051498413 3.614000082015991,0 C3.614000082015991,1.996000051498413 1.996000051498413,3.614000082015991 0,3.614000082015991 C-1.996000051498413,3.614000082015991 -3.614000082015991,1.996000051498413 -3.614000082015991,0 C-3.614000082015991,-1.996000051498413 -1.996000051498413,-3.614000082015991 0,-3.614000082015991z"></path><path stroke-linecap="butt" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="10" stroke="rgb(134,134,134)" stroke-opacity="1" stroke-width="0.7" d=" M0,-3.614000082015991 C1.996000051498413,-3.614000082015991 3.614000082015991,-1.996000051498413 3.614000082015991,0 C3.614000082015991,1.996000051498413 1.996000051498413,3.614000082015991 0,3.614000082015991 C-1.996000051498413,3.614000082015991 -3.614000082015991,1.996000051498413 -3.614000082015991,0 C-3.614000082015991,-1.996000051498413 -1.996000051498413,-3.614000082015991 0,-3.614000082015991z"></path></g><g opacity="1" transform="matrix(1,0,0,1,64.1449966430664,9.605999946594238)"><path fill="rgb(255,255,255)" fill-opacity="1" d=" M0.0010000000474974513,-2.5739998817443848 C1.4220000505447388,-2.5739998817443848 2.5739998817443848,-1.4220000505447388 2.5739998817443848,0 C2.5739998817443848,1.4220000505447388 1.4220000505447388,2.5739998817443848 0.0010000000474974513,2.5739998817443848 C-1.4210000038146973,2.5739998817443848 -2.5739998817443848,1.4220000505447388 -2.5739998817443848,0 C-2.5739998817443848,-1.4220000505447388 -1.4210000038146973,-2.5739998817443848 0.0010000000474974513,-2.5739998817443848z"></path><path stroke-linecap="butt" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="10" stroke="rgb(134,134,134)" stroke-opacity="1" stroke-width="0.7" d=" M0.0010000000474974513,-2.5739998817443848 C1.4220000505447388,-2.5739998817443848 2.5739998817443848,-1.4220000505447388 2.5739998817443848,0 C2.5739998817443848,1.4220000505447388 1.4220000505447388,2.5739998817443848 0.0010000000474974513,2.5739998817443848 C-1.4210000038146973,2.5739998817443848 -2.5739998817443848,1.4220000505447388 -2.5739998817443848,0 C-2.5739998817443848,-1.4220000505447388 -1.4210000038146973,-2.5739998817443848 0.0010000000474974513,-2.5739998817443848z"></path></g><g opacity="1" transform="matrix(1,0,0,1,62.400001525878906,13.144000053405762)"><path fill="rgb(134,134,134)" fill-opacity="1" d=" M-0.0010000000474974513,-1.8009999990463257 C0.9940000176429749,-1.8009999990463257 1.8009999990463257,-0.9950000047683716 1.8009999990463257,-0.0010000000474974513 C1.8009999990463257,0.9929999709129333 0.9940000176429749,1.8009999990463257 -0.0010000000474974513,1.8009999990463257 C-0.9950000047683716,1.8009999990463257 -1.8009999990463257,0.9929999709129333 -1.8009999990463257,-0.0010000000474974513 C-1.8009999990463257,-0.9950000047683716 -0.9950000047683716,-1.8009999990463257 -0.0010000000474974513,-1.8009999990463257z"></path></g></g></g></g></svg>
                      </div>
                    {% endif %}
                  </div>

                  <hr class="my-4">

                  <div class="pt-5">
                    <h6 class="mb-0">
                        <a href="/" class="text-body">
                            <i class="fas fa-long-arrow-alt-left me-2"></i>
                            <<< Quay lại
                        </a>
                    </h6>
                  </div>
                </div>
              </div>
              <div class="col-lg-4 bg-light">
                <div class="p-5">
                  <h3 class="fw-bold mb-5 mt-2 pt-1">Hóa đơn</h3>
                  <hr class="my-4">

                  <div class="d-flex justify-content-between mb-4">
                    <h5 class="text-uppercase">sản phẩm x {{order.get_cart_items}}</h5>
                    <h5>{{order.get_cart_total|floatformat:0}} đ</h5>
                  </div>

                  <h5 class="text-uppercase mb-3">Vận chuyển</h5>

                  <div class="mb-4 pb-2">
                    <select class="form-select">
                      <option value="1">Miễn phí</option>
                    </select>
                  </div>

                  <h5 class="text-uppercase mb-3">Mã khuyến mãi</h5>

                  <div class="mb-5">
                    <div class="input-group mb-3">
                      <input type="text" class="form-control" placeholder="Nhập mã khuyến mãi" aria-label="Username" aria-describedby="basic-addon1">
                    </div>
                  </div>

                  <hr class="my-4">

                  <div class="d-flex justify-content-between mb-5">
                    <h5 class="text-uppercase">Tổng tiền</h5>
                    <h5> {{order.get_cart_total|floatformat:0}} đ</h5>
                  </div>
                  {% if user.is_authenticated %}
                    <div class="d-grid gap-2">
                      <a href="{% url 'payment' %}" style="text-decoration:none;color:white">
                        <button type="button" class="btn btn-dark btn-block btn-lg"
                        data-mdb-ripple-color="dark">
                          Thanh toán
                        </button>
                      </a>
                    </div>
                  {% endif %}

                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
.item::-webkit-scrollbar
{
	width: 10px;
}
.item::-webkit-scrollbar-track
{
	-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
	border-radius: 10px;
	background-color: #F5F5F5;
}
.item::-webkit-scrollbar-thumb
{
	border-radius: 10px;
	-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,.3);
	background-color: #555;
}
</style>

{% endblock cart-content %}